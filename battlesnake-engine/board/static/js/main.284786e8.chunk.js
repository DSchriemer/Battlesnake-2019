(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(21),o=n(12),c=n(15),u=n(27),s=n(10),l="up";function h(e){!function(e){e.Turn=e.Turn||0;var t=!0,n=!1,r=void 0;try{for(var a,i=e.Snakes[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,c=!0,u=!1,s=void 0;try{for(var l,h=o.Body[Symbol.iterator]();!(c=(l=h.next()).done);c=!0){var d=l.value;d.X=d.X||0,d.Y=d.Y||0}}catch(b){u=!0,s=b}finally{try{c||null==h.return||h.return()}finally{if(u)throw s}}}}catch(b){n=!0,r=b}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var p=!0,f=!1,m=void 0;try{for(var v,g=e.Food[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var y=v.value;y.X=y.X||0,y.Y=y.Y||0}}catch(b){f=!0,m=b}finally{try{p||null==g.return||g.return()}finally{if(f)throw m}}}(e);var t,n=d(e.Snakes);return{turn:e.Turn,snakes:n,food:(t=e.Food,t.map(g)),gameOver:k(e)}}function d(e){return e.map(p)}function p(e){return{body:e.Body.map(function(t,n){return function(e,t){var n=e.Body[t],r=e.Body[t-1];return{direction:r?y(n,r):m(e),shouldRender:!v(e,t),type:b(e,t),x:n.X,y:n.Y}}(e,n)}),color:e.Color,_id:e.ID,name:e.Name,health:e.Health,isDead:!!e.Death,death:f(e.Death),head:e.Head,tail:e.Tail,headSvg:e.HeadSvg,tailSvg:e.TailSvg}}function f(e){if(e)return{cause:e.Cause,turn:e.Turn||0}}function m(e){return e.Body.length>1?y(e.Body[1],e.Body[0]):l}function v(e,t){var n=e.Body[t],r=e.Body[t-1];return r&&r.X===n.X&&r.Y===n.Y}function g(e){return{x:e.X,y:e.Y}}function y(e,t){return e.X<t.X?"right":t.X<e.X?"left":e.Y<t.Y?"down":"up"}function b(e,t){return 0===t?"head":t===e.Body.length-1?"tail":"body"}function k(e){var t=d(e.Snakes);return 0===t.length||(1===t.length?!!t[0].death:function(e){return e.filter(function(e){return!e.death}).length<=1}(t))}function w(e){var t=e.split("=");return{key:t[0],value:void 0===t[1]||decodeURIComponent(t[1])}}function E(e){if(!e)return"";var t="?",n="";for(var r in e){var a=e[r];n+="".concat(t).concat(r,"=").concat(a),t="&"}return n}function O(e){var t={http:"ws",https:"wss"};for(var n in t){var r=t[n];if(e.substr(0,n.length+1)===n+":")return r+e.substr(n.length)}throw new Error("Invalid URL: "+e)}function x(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(e,t){var n=e.replace(/\/+$/,""),r=t.replace(/^\/+/,"");return""===n?r:""===r?n:"".concat(n,"/").concat(r)}(e,t)},"")}var S=n(5),j=n(6),T=n(8),F=n(7),R=n(9),_=n(11),C=n(2),G=function(e){function t(){return Object(S.a)(this,t),Object(T.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,"To run a game you need to specify engine and game parameters in the URL. For example:",a.a.createElement("pre",null,window.location.origin,"?engine=<ENGINE_URL>&game=<GAME_ID>"))}}]),t}(a.a.Component),M="#ff5c75",H="#fefefe",P="#f1f1f1",A="#bbb",B="#efefef",I="#222",N="#6f42c1",L="#f1f1f1",U="#f8f9fa",z="dark",X="light",D=.25,Y=.1,K=20,W=4;function V(e){return(K+W)*e+W}function J(e){var t="left"===e.direction||"right"===e.direction?W:0;return K+t}function Q(e){var t="up"===e.direction||"down"===e.direction?W:0;return K+t}function $(e){var t="left"===e.direction?-W:0;return V(e.x)+t}function q(e){var t="up"===e.direction?-W:0;return V(e.y)+t}function Z(e,t){return t?e._id===t?1:D:e.isDead?Y:1}function ee(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}var te=function(e){function t(){return Object(S.a)(this,t),Object(T.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(j.a)(t,[{key:"renderPart",value:function(e,t,n,r,a){switch(n.type){case"head":return this.renderHeadPart(e,t,n,a);case"tail":return this.renderTailPart(e,t,n,a);default:return function(e,t){if(0===t||t===e.body.length-1)return!1;var n=e.body[t+1],r=e.body[t];return(n.x!==r.x||n.y!==r.y)&&n.direction!==r.direction}(e,r)?this.renderCornerPart(e,t,n,r,a):this.renderMiddlePart(e,t,n,r,a)}}},{key:"renderHeadPart",value:function(e,t,n,r){var i=function(e){switch(e.direction){case"left":case"right":default:return V(e.x)}}(n),o=function(e){switch(e.direction){case"up":case"down":default:return V(e.y)}}(n),c=e.headSvg.viewBox.baseVal,u=function(e,t){var n=t.width/2,r=t.height/2;switch(e){case"left":return"rotate(180 ".concat(n," ").concat(r,")");case"up":return"rotate(-90 ".concat(n," ").concat(r,")");case"down":return"rotate(90 ".concat(n," ").concat(r,")");default:return""}}(n.direction,c),s="".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height);return a.a.createElement("svg",{key:"part"+t+",head",viewBox:s,x:i,y:o,width:K,height:K,fill:e.color,opacity:Z(e,r),shapeRendering:"optimizeSpeed"},a.a.createElement("g",{transform:u,dangerouslySetInnerHTML:{__html:e.headSvg.innerHTML}}))}},{key:"renderMiddlePart",value:function(e,t,n,r,i){return n.shouldRender?a.a.createElement("rect",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),x:$(n),y:q(n),width:J(n),height:Q(n),fill:e.color,opacity:Z(e,i),shapeRendering:"optimizeSpeed"}):a.a.createElement("svg",{key:"part"+t+","+r})}},{key:"renderCornerPart",value:function(e,t,n,r,i){if(!n.shouldRender)return a.a.createElement("svg",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),shapeRendering:"optimizeSpeed"});var o,c;switch(n.direction){case"left":case"right":o="0 0 120 100";break;case"up":case"down":default:o="0 0 100 120"}switch(function(e,t){if(0===t||t===e.body.length-1)return!1;var n=e.body[t+1],r=e.body[t];return"".concat(r.direction," ").concat(n.direction)}(e,r)){case"down left":c="scale(-1,1) translate(-100, 0)";break;case"left down":c="rotate(90,0,0) translate(0,-120)";break;case"right down":c="rotate(90,0,0) scale(1,-1)";break;case"up right":c="scale(1,-1) translate(0,-120)";break;case"up left":c="scale(-1,-1) translate(-100,-120)";break;case"right up":c="rotate(-90,0,0) translate(-100,0)";break;case"left up":c="rotate(-90,0,0) scale(1,-1) translate(-100,-120)"}return a.a.createElement("svg",{key:"part".concat(t,",").concat(n.x,",").concat(n.y),x:$(n),y:q(n),width:J(n),height:Q(n),opacity:Z(e,i),fill:e.color,viewBox:o,shapeRendering:"optimizeSpeed"},a.a.createElement("path",{d:"M0,0 h40 a60,60 0 0 1 61,60 v81 h-101 z",transform:c}))}},{key:"renderTailPart",value:function(e,t,n,r){var i=function(e){switch(e.direction){case"left":return V(e.x)-W;case"right":return V(e.x)+W;default:return V(e.x)}}(n),o=function(e){switch(e.direction){case"up":return V(e.y)-W;case"down":return V(e.y)+W;default:return V(e.y)}}(n),c=e.tailSvg.viewBox.baseVal,u=function(e,t){var n=t.width/2,r=t.height/2;switch(e){case"right":return"rotate(180 ".concat(n," ").concat(r,")");case"down":return"rotate(-90 ".concat(n," ").concat(r,")");case"up":return"rotate(90 ".concat(n," ").concat(r,")");default:return""}}(n.direction,c),s="".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height);return n.shouldRender?a.a.createElement("svg",{key:"part"+t+",tail",viewBox:s,x:i,y:o,width:K,height:K,fill:e.color,opacity:Z(e,r),shapeRendering:"optimizeSpeed"},a.a.createElement("g",{transform:u,dangerouslySetInnerHTML:{__html:e.tailSvg.innerHTML}})):a.a.createElement("svg",{key:"part"+t+",tail"})}},{key:"renderGrid",value:function(){var e=this,t=this.props.snakes||[],n=this.props.food||[],r=t.concat().sort(function(e,t){return(e.isDead?0:1)-(t.isDead?0:1)}),i=V(this.props.columns),o=V(this.props.rows);return a.a.createElement("svg",{width:this.props.maxWidth,height:this.props.maxHeight,x:this.props.x,y:this.props.y,viewBox:"0 0 ".concat(i," ").concat(o)},ee(this.props.rows).map(function(t,n){return ee(e.props.columns).map(function(t,r){return a.a.createElement("rect",{key:"cell"+n+","+r,x:V(r),y:V(n),width:K,height:K,fill:e.props.theme===z?"#ddd":L,opacity:e.props.highlightedSnake?D:e.props.theme===z?.75:null,shapeRendering:"optimizeSpeed"})})}),r.map(function(t,n){return t.body.map(function(r,a){return e.renderPart(t,n,r,a,e.props.highlightedSnake)})}),n.map(function(t,n){return a.a.createElement("circle",{key:"food"+n,cx:V(t.x)+K/2,cy:V(t.y)+K/2,r:K/3.25,fill:M,opacity:e.props.highlightedSnake?D:null,shapeRendering:"optimizeQuality"})}))}},{key:"render",value:function(){return this.props.snakes?this.renderGrid():void 0}}]),t}(a.a.Component),ne=function(e){function t(){return Object(S.a)(this,t),Object(T.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return a.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100)},a.a.createElement(te,{snakes:this.props.snakes,food:this.props.food,columns:this.props.columns,rows:this.props.rows,highlightedSnake:this.props.highlightedSnake,theme:this.props.theme,maxWidth:100,maxHeight:100,x:0,y:0}))}}]),t}(a.a.Component),re=n(1),ae=n.n(re),ie=n(3);function oe(e,t){var n=!1;return new Promise(function(r,a){var i=new WebSocket(e);i.addEventListener("message",function(e){var a=JSON.parse(e.data);(n=t(a))&&(i.close(),r())}),i.addEventListener("onerror",function(e){a(e)}),i.addEventListener("onclose",function(e){n||(n=!0,r())})})}var ce={};function ue(e){return ce[e]}function se(e){return e in ce?Promise.resolve(ce[e]):function(e){return le.apply(this,arguments)}(e)}function le(){return(le=Object(ie.a)(ae.a.mark(function e(t){var n,r,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,a=he(r),ce[t]=a,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function he(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var de="tongue",pe="bolt";function fe(){return(fe=Object(ie.a)(ae.a.mark(function e(t,n){var r;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t+E(n));case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function me(e){return new Promise(function(t){return setTimeout(t,e)})}function ve(e){var t=e.reduce(function(e,t){return e.concat([t.Head,t.Tail])},[]),n=new Set(t);return Array.from(n)}function ge(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.Head||(o.Head=de),o.Tail||(o.Tail=pe),o.Head=Ee(o.Head),o.Tail=Oe(o.Tail)}}catch(c){n=!0,r=c}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}function ye(e){return be.apply(this,arguments)}function be(){return(be=Object(ie.a)(ae.a.mark(function e(t){var n,r,a,i,o,c;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ge(t),e.next=3,u=ve(t),Promise.all(u.map(se));case 3:for(n=!0,r=!1,a=void 0,e.prev=6,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)(c=o.value).HeadSvg=ue(c.Head),c.TailSvg=ue(c.Tail);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),r=!0,a=e.t0;case 14:e.prev=14,e.prev=15,n||null==i.return||i.return();case 17:if(e.prev=17,!r){e.next=20;break}throw a;case 20:return e.finish(17);case 21:return e.finish(14);case 22:case"end":return e.stop()}var u},e,this,[[6,10,14,22],[15,,17,21]])}))).apply(this,arguments)}function ke(e){return e.indexOf("/")>=0||e.indexOf(".")>=0}function we(e,t){return x(e,t)+".svg"}function Ee(e){return we("images/snake/head",ke(e)?de:e)}function Oe(e){return we("images/snake/tail",ke(e)?pe:e)}function xe(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(ie.a)(ae.a.mark(function e(t){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t.Snakes);case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function je(e,t){return function(e,t){return fe.apply(this,arguments)}(x(e,"games/".concat(t)))}function Te(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(ie.a)(ae.a.mark(function e(t,n){var r;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=x(t,"games/".concat(n,"/start")),e.next=3,fetch(r,{method:"POST",cache:"no-cache"});case 3:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Re(e,t,n){return _e.apply(this,arguments)}function _e(){return(_e=Object(ie.a)(ae.a.mark(function e(t,n,r){var a,i,o,c;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return i=i.then(Object(ie.a)(ae.a.mark(function t(){return ae.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(e);case 2:return t.abrupt("return",r(a,e));case 3:case"end":return t.stop()}},t,this)}))),k(e)},e.next=3,je(t,n);case 3:return a=e.sent,i=Promise.resolve(),c=x(O(t),"socket/".concat(n)),e.next=8,oe(c,o);case 8:return e.next=10,i;case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ce(e,t){return e.filter(function(e){return e.turn===t})[0]}var Ge=Object(C.a)("div")({marginBottom:".5rem",paddingTop:"1rem",width:"100%",paddingBottom:"1rem"}),Me=Object(C.a)("span")({display:"block",paddingBottom:"1rem"}),He=Object(C.a)("div")({width:"100%",height:"1.8rem",background:H,borderRadius:"1.5rem"}),Pe=Object(C.a)("div")(function(e){return{height:"100%",backgroundColor:e.color,borderRadius:"inherit"}}),Ae=Object(C.a)("div")(function(e){return{height:"100%",padding:".2rem .5rem",fontSize:"1.2rem",backgroundColor:e.theme===z?A:P,borderRadius:"inherit",color:I}}),Be=function(e){function t(){return Object(S.a)(this,t),Object(T.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return a.a.createElement(Ge,null,a.a.createElement(Me,null,this.props.snake.name),a.a.createElement(He,null,this.props.snake.death?a.a.createElement(Ae,{theme:this.props.theme},function(e){switch(e){case"snake-collision":return"Collided with snake body";case"snake-self-collision":return"Collided with own body";case"starvation":return"Starvation";case"head-collision":return"Head on head collision";case"wall-collision":return"Collided with a wall";default:return e}}(this.props.snake.death.cause)):a.a.createElement(Pe,{color:this.props.snake.color,style:{width:"".concat(this.props.snake.health,"%")}})))}}]),t}(a.a.Component);function Ie(){var e=Object(_.a)(["\n  transition: background-color 0.2s, box-shadow 0.2s;\n  box-shadow: ",";\n\n  &:hover {\n    background-color: ",";\n    cursor: pointer;\n  }\n"]);return Ie=function(){return e},e}var Ne=Object(C.a)("div")(function(e){return{color:e.theme===z?B:I,fontWeight:700,fontSize:"2.4rem"}}),Le=Object(C.a)("div")(Ie(),function(e){return e.highlighted?"0 0 0 1px ".concat(B):null},function(e){return e.theme===z?N:U}),Ue=Object(C.a)("div")({width:"100%",marginTop:"1rem",marginBottom:"1rem"}),ze=function(e){function t(){var e,n;Object(S.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(T.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(a)))).state={highlightedSnake:null},n.toggleHighlight=function(e){var t=function(e,t){return e.highlightedSnake!==t._id?t._id:null};n.props.highlightSnake(t(n.state,e)),n.setState(function(n){return{highlightedSnake:t(n,e)}})},n}return Object(R.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.state.highlightedSnake;return a.a.createElement(Ne,{theme:this.props.theme},a.a.createElement(Ue,null,"Turn: ",this.props.turn),this.props.snakes?function(e){var t=e.filter(function(e){return!e.isDead}).sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),n=e.filter(function(e){return e.isDead}).sort(function(e,t){return e.death.turn-t.death.turn}).reverse();return t.concat(n)}(this.props.snakes).map(function(n,r){return a.a.createElement(Le,{key:"avatarwrapper"+r,onClick:function(){return e.toggleHighlight(n)},highlighted:t===n._id,theme:e.props.theme},a.a.createElement(Be,{snake:n,key:"avatar"+r,theme:e.props.theme}))}):void 0)}}]),t}(a.a.Component),Xe=n(25),De=n.n(Xe);function Ye(){var e=Object(_.a)(["\n  display: inline-block;\n  min-width: 10rem;\n  padding: 0.5rem 1rem;\n  margin: 0 0.5rem;\n  border: solid 1px #bbb;\n  border-radius: 5px;\n  background: #efefef;\n  color: #333;\n  font-size: 2rem;\n  text-decoration: none;\n  text-align: center;\n  cursor: pointer;\n  transition: background 250ms ease-in-out, transform 150ms ease;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n\n  &:hover {\n    background: #dfdfdf;\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &:disabled {\n    color: #ccc;\n    cursor: not-allowed;\n  }\n\n  &:disabled:hover {\n    background: #efefef;\n  }\n"]);return Ye=function(){return e},e}var Ke=Object(C.a)("div")(function(e){return{display:e.hide?"none":"flex",justifyContent:"center",padding:"2rem 0",width:"100%"}}),We=Object(C.a)("button")(Ye()),Ve=function(e){function t(){var e,n;Object(S.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(T.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(a)))).handleReload=function(){n.props.reloadGame()},n.handlePlayPause=function(){n.props.toggleGamePause()},n.handleBackward=function(){n.props.stepBackwardFrame()},n.handleForward=function(){n.props.stepForwardFrame()},n.handleKeyEvent=function(e){switch(e){case"r":n.handleReload();break;case"left":n.handleBackward();break;case"right":n.handleForward();break;case"space":n.handlePlayPause()}},n}return Object(R.a)(t,e),Object(j.a)(t,[{key:"componentWillMount",value:function(){this.keyEvents=["r","left","right","space"]}},{key:"render",value:function(){return this.renderControls()}},{key:"renderControls",value:function(){var e=this.props,t=e.currentFrame,n=e.hideControls,r=e.paused;return a.a.createElement(Ke,{hide:n},a.a.createElement(We,{onClick:this.handleReload,disabled:0===t.turn||!r},"Reload"),a.a.createElement(We,{onClick:this.handlePlayPause},r?"Play":"Pause"),a.a.createElement(We,{onClick:this.handleBackward,disabled:!r},"Backward"),a.a.createElement(We,{onClick:this.handleForward,disabled:!r},"Forward"),a.a.createElement(De.a,{handleKeys:this.keyEvents,onKeyEvent:this.handleKeyEvent}))}}]),t}(a.a.Component);function Je(){var e=Object(_.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  background: ",";\n  background: ",";\n"]);return Je=function(){return e},e}var Qe,$e=Object(C.a)("div")(Je(),function(e){return e.theme===z?N:"transparent"},function(e){return e.theme===z?"linear-gradient(45deg, #000 0%, ".concat(N," 100%)"):"transparent"}),qe=Object(C.a)("div")({display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"}),Ze=Object(C.a)("div")({display:"flex",justifyContent:"space-between",padding:"0 2rem",width:"100%",height:"100%"}),et=Object(C.a)("div")(function(e){return{display:"flex",flexDirection:"column",width:e.hideScoreboard?"100%":"65vw",height:"100%"}}),tt=Object(C.a)("div")({width:"35vw",marginLeft:"2rem"}),nt=function(e){function t(){return Object(S.a)(this,t),Object(T.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(j.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.options;this.theme=this.props.options.boardTheme?this.props.options.boardTheme:X,e.game&&e.engine?(this.hideScoreboard="true"===this.props.options.hideScoreboard,this.props.setEngineOptions(e),this.props.fetchFrames()):this.invalidArgs=!0}},{key:"render",value:function(){return this.invalidArgs?a.a.createElement(G,null):this.props.currentFrame?this.renderGame():a.a.createElement(qe,null,a.a.createElement("div",{className:"la-ball-grid-beat la-dark la-2x",style:{color:M}},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement("div",null)))}},{key:"renderGame",value:function(){return a.a.createElement($e,{theme:this.theme},a.a.createElement(Ze,null,a.a.createElement(et,{hideScoreboard:this.hideScoreboard},a.a.createElement(ne,{snakes:this.props.currentFrame.snakes,food:this.props.currentFrame.food,columns:this.props.grid.width,rows:this.props.grid.height,highlightedSnake:this.props.highlightedSnake,theme:this.theme}),a.a.createElement(Ve,{currentFrame:this.props.currentFrame,hideControls:"true"===this.props.options.hideMediaControls,reloadGame:this.props.reloadGame,toggleGamePause:this.props.toggleGamePause,stepBackwardFrame:this.props.stepBackwardFrame,stepForwardFrame:this.props.stepForwardFrame,paused:this.props.paused})),!this.hideScoreboard&&a.a.createElement(tt,null,a.a.createElement(ze,{turn:this.props.currentFrame.turn,snakes:this.props.currentFrame.snakes,food:this.props.currentFrame.food,highlightSnake:this.props.highlightSnake,theme:this.theme}))))}}]),t}(a.a.Component),rt=function(e,t){return{type:"RECEIVE_FRAME",game:e,frame:t}},at=function(e){return{type:"SET_CURRENT_FRAME",frame:e}},it=function(e){window.parent.postMessage(e,"*")},ot=function(){return function(){var e=Object(ie.a)(ae.a.mark(function e(t,n){var r,a,i,o,c,u;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().engineOptions,a=r.autoplay,i=r.engine,o=r.game,c=r.turn,u=parseInt(c),t({type:"REQUEST_FRAMES"}),e.next=5,Re(i,o,function(e,r){if(t({type:"SET_GAME_STATUS",status:e.Game.Status}),r.Turn=r.Turn||0,t(rt(e,r)),0===r.Turn){var i=n().frames[0];it({turn:i.turn}),t(at(i)),a&&(t({type:"RESUME_GAME"}),t(ct(i)))}if(u&&u<=n().frames.length){var o=n().frames[u];t(at(o))}});case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},ct=function e(t){return function(){var n=Object(ie.a)(ae.a.mark(function n(r,a){var i,o,c,u,s,l,h,d,p,f,m,v,g;return ae.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=a().engineOptions.frameRate,o=a().frames.slice(),c=o.indexOf(t),u=o.slice(c),s=Math.ceil(i||20),l=1e3/s,h=!0,d=!1,p=void 0,n.prev=9,f=u[Symbol.iterator]();case 11:if(h=(m=f.next()).done){n.next=21;break}if(v=m.value,!a().paused){n.next=15;break}return n.abrupt("return");case 15:return r(at(v)),n.next=18,me(l);case 18:h=!0,n.next=11;break;case 21:n.next=27;break;case 23:n.prev=23,n.t0=n.catch(9),d=!0,p=n.t0;case 27:n.prev=27,n.prev=28,h||null==f.return||f.return();case 30:if(n.prev=30,!d){n.next=33;break}throw p;case 33:return n.finish(30);case 34:return n.finish(27);case 35:(g=u[u.length-1]).gameOver?a().paused||r({type:"GAME_OVER"}):r(e(g));case 37:case"end":return n.stop()}},n,this,[[9,23,27,35],[28,,30,34]])}));return function(e,t){return n.apply(this,arguments)}}()},ut=(Qe=window.location.search)&&Qe.length?Qe.substr(1).split("&").map(w).reduce(function(e,t){return e[t.key]=t.value,e},{}):{},st=Object(c.b)(function(e){return{options:ut,grid:e.grid,paused:e.paused,currentFrame:e.currentFrame,frames:e.frames,highlightedSnake:e.highlightedSnake,gameStatus:e.gameStatus}},function(e){return{setEngineOptions:function(t){return e({type:"SET_ENGINE_OPTIONS",engineOptions:t})},fetchFrames:function(){return e(ot())},reloadGame:function(){return e(function(){var e=Object(ie.a)(ae.a.mark(function e(t,n){var r,a,i;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.frames,r.paused&&(i=Ce(a,0),t(at(i)));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},toggleGamePause:function(t){return e(function(){var e=Object(ie.a)(ae.a.mark(function e(t,n){var r,a,i,o,c;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.currentFrame,i=r.gameStatus,o=r.paused,c=r.engineOptions,!o){e.next=10;break}if("stopped"!==i){e.next=6;break}return e.next=5,Te(c.engine,c.game);case 5:t(ot());case 6:t({type:"RESUME_GAME"}),t(ct(a)),e.next=12;break;case 10:it({turn:a.turn+1}),t({type:"PAUSE_GAME"});case 12:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},stepForwardFrame:function(){return e(function(){var e=Object(ie.a)(ae.a.mark(function e(t,n){var r,a,i,o,c;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.currentFrame,i=r.frames,o=a.turn+1,(c=Ce(i,o))&&(it({turn:c.turn}),t(at(c)));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},stepBackwardFrame:function(){return e(function(){var e=Object(ie.a)(ae.a.mark(function e(t,n){var r,a,i,o,c;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n(),a=r.currentFrame,i=r.frames,o=a.turn-1,(c=Ce(i,o))&&(it({turn:c.turn}),t(at(c)));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},highlightSnake:function(t){return e(function(e){return{type:"HIGHLIGHT_SNAKE",snakeId:e}}(t))}}})(nt),lt=n(26),ht=Object(o.a)(lt.a),dt=Object(o.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ENGINE_OPTIONS":return t.engineOptions.autoplay=t.engineOptions.autoplay&&"true"===t.engineOptions.autoplay,Object(s.a)({},e,{engineOptions:t.engineOptions});case"PAUSE_GAME":case"GAME_OVER":return Object(s.a)({},e,{paused:!0});case"RESUME_GAME":return Object(s.a)({},e,{paused:!1});case"SET_GAME_STATUS":return Object(s.a)({},e,{gameStatus:t.status});case"SET_CURRENT_FRAME":return Object(s.a)({},e,{currentFrame:t.frame});case"RECEIVE_FRAME":var n=h(t.frame);return Object(s.a)({},e,{grid:{height:t.game.Game.Height,width:t.game.Game.Width},frames:[].concat(Object(u.a)(e.frames),[n])});case"REQUEST_FRAMES":case"FETCH_FRAMES":return Object(s.a)({},e);case"HIGHLIGHT_SNAKE":return function(e,t){if(window.parent)try{window.parent.postMessage({action:"HIGHLIGHT_SNAKE",id:t.snakeId,name:t.snakeId?e.currentFrame.snakes.find(function(e){return e._id===t.snakeId}).name:null},"*")}catch(n){console.error(n)}}(e,t),Object(s.a)({},e,{highlightedSnake:t.snakeId});default:return Object(s.a)({},e)}},{options:null,grid:[],frames:[],paused:!0,highlightedSnake:null},ht);Object(i.render)(a.a.createElement(c.a,{store:dt},a.a.createElement(st,null)),document.getElementById("root"))}},[[29,2,1]]]);
//# sourceMappingURL=main.284786e8.chunk.js.map